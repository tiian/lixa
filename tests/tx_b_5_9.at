AT_BANNER([TX: B.5 ... Multiple RMs (tx_rollback/xa_rollback)])

AT_SETUP([TX/B.5/9.0 (XAER_RMFAIL,any)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh reset start case0024 2 3 -7], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-3
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.1 (any,XAER_RMFAIL)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.2 (XAER_INVAL,any)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_RMFAIL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.3 (any,XAER_INVAL)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_RMFAIL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.4 (XAER_PROTO,any)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMFAIL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-7
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.5 (any,XAER_PROTO)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMFAIL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-7
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.6 (XA_HEURMIX,any)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.7 (any,XA_HEURMIX)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.8 (XA_HEURHAZ,any)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -4], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -4], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-6
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_OK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -4], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.9 (any,XA_HEURHAZ)])
# XA_HEURHAZ XA_HEURCOM XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_HEURMIX XA_OK 
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/5
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XA_RBROLLBACK XA_RBCOMMFAIL XA_RBDEADLOCK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/100
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/101
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/102
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -4], [0], [ignore], [ignore])
# XA_RBINTEGRITY XA_RBOTHER XA_RBPROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/103
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/104
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/105
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -4], [0], [ignore], [ignore])
# XA_RBTIMEOUT XA_RBTRANSIENT XAER_ASYNC
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/106
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/107
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-2
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_RMERR XAER_NOTA XAER_INVAL
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/-4
xa_start/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/-5
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XAER_PROTO
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-6
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -7], [0], [ignore], [ignore])
# XA_OK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
# this rollback is related to previous (recovery pending) transaction
xa_rollback/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/8
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -4], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.10 (XA_HEURCOM,XA_HEURCOM)])
# XA_HEURCOM XA_HEURCOM XA_HEURCOM XA_HEURCOM
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -9], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.11 (XA_HEURCOM,any rollback)])
# XA_HEURRB XAER_NOTA XAER_RMERR
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-3
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XAER_OK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.11 (any rollback,XA_HEURCOM)])
# XA_HEURRB XAER_NOTA XAER_RMERR
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
# XAER_OK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/7
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 -3], [0], [ignore], [ignore])
AT_CLEANUP

AT_SETUP([TX/B.5/9.11 (any rollback,any rollback)])
# XA_HEURRB XAER_NOTA XAER_RMERR XA_OK
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset none case0024 2 3 0], [0], [ignore], [ignore])
# XA_OK XAER_RMERR XAER_NOTA XA_HEURRB
AT_DATA([monkey1s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/0
]])
AT_DATA([monkey2s.conf],
[[# monkey R.M. config
xa_open/0
xa_start/0
xa_end/0
xa_rollback/-3
]])
AT_DATA([monkey1d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/-4
]])
AT_DATA([monkey2d.conf],
[[# monkey R.M. config
xa_open/0
xa_end/0
xa_rollback/6
xa_forget/0
]])
AT_CHECK([export LIXA_PROFILE=CASE_PROF_0002 ; lixa_test_exec.sh noreset stop case0024 2 3 0], [0], [ignore], [ignore])
AT_CLEANUP

